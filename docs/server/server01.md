---
title: BigQuery
layout: default
parent: Server
nav_order: 1
---

# BigQuery

## 특징

1.  컴퓨팅과 스토리지 분리

쿼리엔진 즉 컴퓨팅과 스토리지를 분리하여 컴퓨팅 엔진 리소스를 공유할 수 있어 (슬롯) 연산량이 필요한 만큼 끌어다 쓸수 있다. 서버리스 분산 sql엔진으로 컴퓨팅과 스토리지가 동일한 위치에 없어도 데이터센터의 광대역폭으로 빠른 연산이 가능(정통 db는 스토리지와 컴퓨팅이 같이 커져야함)

1.  SQL 문으로 동작하며 맵리듀스처럼 전체 데이터셋을 빠르게 분석.
- SQL
    
    기존 mysql 같은 online transaction processing(OLTP)는 데이터의 무결성을 유지하는데 최적화되어있다. 그래서 빠른 검색을 하려면 인덱스 생성 해야 하지만 인덱스는 읽기를 빠르게 하지만 쓰기를 느려지게 하는 트레이드오프 관계이다. 그리고 전체를 스켄하는 집계 그룹핑에 굉장히 느리다. 하지만 sql쿼리 검색 장점은 살렸다.
    
- map reduce
map(중간 키 생성) reduce(병합) 작업을 하는데 특화된 하둡이 있다. 하둡 관리의 단점을 보완하기 위해 서버리스 분산 sql엔진을 만듬
    
    드레멜 채용
    컬럼 단위 데이터 베이스로 전체 데이터 중 필요한 필드만 빠르게 처리 할 수 있다
    

## 용어.

- 슬롯
    - 쿼리 워커 샤드의 실행 thread(cpu core 절반 1 기가 램 사용)
    - 쿼리에 필요한 슬롯을 미리 예상해서 슬롯을 할당하고 쿼리 실행(워커 샤드에서 실행)
    슬롯은 빅쿼리 사용자들에게 on-demand로 할당

## 최적화 방법

- 파티셔닝
논리적 테이블을 작은 파티션으로 분리해서 필요한 부분만 데이터를 쿼리하는 기능
- 클러스터링
특정 컬럼을 이용해 만들어진 키를 시반으로 정렬한 기능
쿼리 엔진이 키를 가진 파일만 열러보명 되므로 조회와 범위 스캔 효율이 좋아짐
- 뷰
빅쿼리의 결과를 캐싱 . 미리 연산된 뷰

## 비용

1. 주문형
쿼리 데이터 처리양에 따라 부과
2. 정액제
일정수의 슬롯 제공

### 읽기 성능 향상 방법

- 비정규화
    - 저장 효율성을 포기하고 불필요한 데이터를 같이 저장하여 조인이 필요 없게 함
